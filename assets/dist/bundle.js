var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{qw:()=>In,cF:()=>$n,eF:()=>Xn});const n="";var o,r;!function(t){t.string="string",t.number="number",t.boolean="boolean",t[void 0]="undefined"}(o||(o={})),function(t){t.function="function",t.date="date",t.unknown="unknown",t.object="object"}(r||(r={}));const s={tag:"html",dom:"dom",templater:"templater",tagComponent:"tagComponent",tagArray:"tagArray",subject:"subject",tagJsSubject:"tagJsSubject",renderOnce:"renderOnce",stateRender:"stateRender",version:Date.now()};function a(t){return _e()?v((()=>i(t))):i(t)}function i(t){let e=t;const n=new Set;return{get value(){return e},set value(t){e!==t&&(e=t,n.forEach((e=>e(t))))},subscribe(t){t(e),n.add(t);const o=()=>n.delete(t);return o.unsubscribe=o,o}}}function l(t){if(!t)return!1;switch(t.tagJsType){case s.dom:case s.tag:case s.templater:return!0}return!1}function c(t){const e=t?.tagJsType;return e===s.tagComponent||e===s.stateRender}function u(t){return p(t)&&typeof t.subscribe===r.function}function d(t){return typeof t===r.function}function p(t){return typeof t===r.object&&null!==t}function f(t){return Array.isArray(t)}function g(t,e,n){const o=m.globalSubCount$;m.globalSubCount$.next(o.value+1);const r=function(){r.unsubscribe()};return r.callback=e,r.subscriptions=[],r.unsubscribe=function(){return function(t,e,n){!function(t,e){const n=t.findIndex((t=>t.callback===e));-1!==n&&t.splice(n,1)}(e,n);const o=m.globalSubCount$;m.globalSubCount$.next(o.value-1),t.unsubscribe=()=>t;const r=t.subscriptions;for(const t of r)t.unsubscribe();return t}(r,n,e)},r.add=t=>(r.subscriptions.push(t),r),r.next=t=>{e(t,r)},r}function h(t,e,n){const o=[...e],r=o.shift(),s=t=>{if(o.length)return h(t,o,n);n(t)};let a=s;const i=r(t,{setHandler:t=>a=t,next:s});a(i)}class m{value;onSubscription;methods=[];isSubject=!0;subscribers=[];subscribeWith;constructor(t,e){this.value=t,this.onSubscription=e}subscribe(t){const e=g(0,t,this.subscribers),n=this.subscribeWith;if(n){if(this.methods.length){const n=t;t=t=>{h(t,this.methods,(t=>n(t,e)))}}return n(t)}return this.subscribers.push(e),this.onSubscription&&this.onSubscription(e),e}next(t){this.value=t,this.emit()}set=this.next.bind(this);emit(){const t=this.value,e=this.subscribers;for(const n of e)n.callback(t,n)}toPromise(){return new Promise((t=>{this.subscribe(((e,n)=>{n.unsubscribe(),t(e)}))}))}toCallback(t){const e=this.subscribe(((n,o)=>{const r=o?.unsubscribe;r?r():setTimeout((()=>e.unsubscribe()),0),t(n)}));return this}pipe(...t){const e=new m(this.value);return e.setMethods(t),e.subscribeWith=t=>this.subscribe(t),e.next=t=>this.next(t),e}setMethods(t){this.methods=t}static all(t){return function(t){const e=new m;return e.subscribeWith=e=>{const n=[],o=[],r=(r,s)=>{if(n[s]=!0,o[s]=r,n.length===t.length){for(const t of n)if(!t)return;e(o,a)}},s=[...t],a=s.shift().subscribe((t=>r(t,0))),i=s.map(((t,e)=>t.subscribe((t=>r(t,e+1)))));return a.subscriptions=i,a},e}(t.map((t=>{if(u(t))return t;return new m(t,(e=>(e.next(t),e)))})))}static globalSubCount$=new m(0)}class b extends m{value;constructor(t){super(t),this.value=t}subscribe(t){const e=super.subscribe(t);return t(this.value,e),e}}function v(t){return T.stateConfig.handlers.handler(t)}function y(t){const e=T.stateConfig;e.states[e.statesIndex]=t;return e.support.states[e.statesIndex]=t,++e.statesIndex,t(((...t)=>(v(t),t)))}function w(t){const e=T.stateConfig,n=e.support,o=e.statesIndex,r=e.prevSupport,s=r?.states[o],a=[];s(((...t)=>(a.push(t),t)));let i=0;return n.states[e.statesIndex]=t,++e.statesIndex,t(((...t)=>{e.stateArray.push({get:()=>t,defaultValue:t});const n=a[i];return++i,n}))}function x(t,e){e.handlers.handler=j,e.handlers.statesHandler=y,e.rearray=[],e.stateArray=[],e.states=[],e.statesIndex=0,e.support=t}function k(t,e,n,o){e.rearray=n,e.stateArray=[],e.states=o,e.statesIndex=0,e.handlers.handler=$,e.handlers.statesHandler=w,e.support=t}class C{}function S(t){const e=t.callback;if(!e)return t.defaultValue;const[n]=function(t){const e=t(C),[n]=e,[o]=t(n);return[n,o]}(e);return n}function $(){const t=T.stateConfig,e=t.rearray[t.stateArray.length];return t.stateArray.push(e),e.defaultValue}function j(t){const e=T.stateConfig;let n=t;if(typeof t===r.function&&(n=t()),typeof n===r.function){const t=n;n=function(...e){return t(...e)},n.original=t}const o={get:function(){return S(o)},defaultValue:n};return e.stateArray.push(o),n}const T={stateConfig:{stateArray:[],version:Date.now(),handlers:{handler:j,statesHandler:y}}};function E(t,e,n,o){for(let n=t.length-1;n>=0;--n){const o=t[n].get(),r=e[n].callback;r&&r(o)}for(let t=o.length-1;t>=0;--t){const e=[],r=(...t)=>(e.push(t),t);o[t](r);let s=0;const a=t=>e[s++];n[t](a)}}const A=(t,e)=>O(t,e),V=t=>t;const O=(t,e,{init:n,before:o,final:r=V}={})=>{const s=v({pastResult:void 0,values:void 0}),a=s.values;if(void 0===a){if(o&&!o(t))return s.values=t,s.pastResult;const i=(n||e)(t,a);return s.pastResult=r(i),s.values=t,s.pastResult}if(t.every(((t,e)=>t===a[e])))return s.pastResult;if(o&&!o(t))return s.values=t,s.pastResult;const i=e(t,a);return s.pastResult=r(i),a.length=0,a.push(...t),s.pastResult};function N(t,e){return Object.defineProperty(e,"noInit",{get(){const e=t();return e.setup.init=()=>{},e}}),Object.defineProperty(e,"asSubject",{get(){const e=t(),n=v((()=>_e())),o=v((()=>new b(void 0))),r=v((()=>({stateArray:T.stateConfig.stateArray,states:T.stateConfig.states}))),s=(t,s)=>(O(t,((t,e)=>{const a=_e(),i=s(t,e);if(a!==n){const t=r.stateArray,e=n.subject.global.oldest;E(t,e.state,r.states,e.states)}o.next(i)}),e.setup),o);return s.setup=e.setup,N((()=>s),s),s}}),Object.defineProperty(e,"truthy",{get(){const e=t();return e.setup.before=t=>t.every((t=>t)),e}}),e}function J(t){return _e()?v((()=>new m(t))):new m(t)}function P(t){return T.stateConfig.handlers.statesHandler(t)}function D(t){const e=a([]),n=a(0),o=a(0);let r=[],s=0;return o.value=n.value,t(((...t)=>(r=t,t))),A(r,(()=>{++s,e.value=r,t((()=>r))})),P((()=>{if(s)return t(((...t)=>(e.value=t,n!=o?e.value:t))),o.value=n.value,void++n.value;t((()=>e.value))})),++s,e.value}N((()=>function(t){const e=(e,n)=>O(e,n,t);return e.setup=t,N((()=>e),e),e}({})),A),J._value=t=>{const e=v((function(){return{stateArray:T.stateConfig.stateArray,states:T.stateConfig.states}})),n=_e();return v((function(){return new b(t).pipe((t=>(E(n.state,e.stateArray,n.states,e.states),t)))}))},J.all=function(t){const e=v((()=>({stateArray:T.stateConfig.stateArray,states:T.stateConfig.states}))),n=_e();return m.all(t).pipe((t=>(E(n.state,e.stateArray,n.states,e.states),t)))};class L extends Error{details;constructor(t,e,n={}){super(t),this.name=L.name,this.details={...n,errorCode:e}}}class M extends L{constructor(t,e){super(t,"state-mismatch-error",e),this.name=M.name}}class z extends L{constructor(t,e){super(t,"sync-callback-error",e),this.name=z.name}}function R(t,e){return I(t,e)}function I(t,e){if(null===t||typeof t!==r.object)return t;if(e<0)return t;if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);const n=f(t)?[]:Object.create(Object.getPrototypeOf(t));if(f(t))for(let o=0;o<t.length;o++)n[o]=I(t[o],e-1);else for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=I(t[o],e-1));return n}function W(t,e,n){return X(t,e,n)}function X(t,e,n){return!(t!==e&&(o=t,s=e,!d(o)||!d(s)||o.toString()!==s.toString()))||(n<0||typeof t===r.object&&typeof e===r.object&&(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():f(t)&&f(e)?function(t,e,n){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(!X(t[o],e[o],n-1))return!1;return!0}(t,e,n-1):!f(t)&&!f(e)&&function(t,e,n){const o=Object.keys(t),r=Object.keys(e);if(0===o.length&&0===r.length)return!0;if(o.length!==r.length)return!1;for(const s of o){if(!r.includes(s)||!X(t[s],e[s],n-1))return!1}return!0}(t,e,n-1)));var o,s}function Y(t,e){const n={propWatch:t,props:e,tagJsType:s.templater,key:function(t){return n.arrayValue=t,n}};return n}const H=[];function F(t,e,n){return t.map((t=>function(t,e,n,o){if(l(t)||!t)return t;if(!e)return t;return B(t,e,n,o)}(t,e.ownerSupport,e,n)))}function B(t,e,n,o){if(!t)return t;if(t.tagJsType)return t;if(typeof t===r.function)return function(t,e){const n=t.mem;if(n)return t;const o=function(...t){return o.toCall(...t)};return o.original=t,o.mem=t,o.toCall=function(...t){return function(t,e,n){const o=n.subject.global,r=o?.newest||n,s=void 0===_e(),a=t(...e),i=function(){const t=r.subject.global;if(!1===s){if(!0===t.locked)return a}return function(t,e){const n=t.subject,o=Fe(t.templater);if(o){return Ke(e,t)}const r=n.global;r.locked=!0,He(r.newest,t,e,n),delete r.locked}(r,n),a};if(s)return i();return T.tagClosed$.toCallback(i),a}(o.mem,t,e)},Object.assign(o,t),o}(t,e);if(o===ut)return t;return U(t)?t:f(t)?function(t,e,n,o){for(let s=t.length-1;s>=0;--s){const a=t[s];if(t[s]=B(a,n,e,o+1),typeof a===r.function){if(a.mem)continue;K(o+1,s,a,t,e)}}return t}(t,n,e,o):function(t,e,n,o){const s=Object.keys(t);for(const a of s){const s=t[a],i=B(s,n,e,o+1);if(t[a]===i)continue;const l=Object.getOwnPropertyDescriptor(t,a);if(!(l?.get||l?.set)&&(t[a]=i,typeof i===r.function)){if(s.mem)continue;K(o+1,a,s,t,e)}}return t}(t,n,e,o)}function K(t,e,n,o,r){if(t>0){const t=r.subject.global;o[e].subscription=t.destroy$.toCallback((function(){o[e]=n}))}}function U(t){return typeof t!==r.object||!t||t.tagJsType}function _(t,e,n,o){const a=e.original;let i;t.tagJsType===s.stateRender?i=t():(i=a(...o),typeof i===r.function&&(i=i())),i.templater=t,t.tag=i;const l=T.stateConfig;return n.state=l.stateArray,n.states=l.states,n}function q(t){return t.map(Z)}function Z(t,e){const n=t,o=t?.tagJsType;if(o)switch(o){case s.stateRender:return;case s.dom:case s.tag:case s.templater:return q(n.values)}return f(t)?q(n):R(t,e)}function G(t,e,n){const o={templater:t,subject:e,castedProps:n,appSupport:void 0},r=e.global;return r.blocked=[],r.destroy$=new m,o}function Q(t,e,n,o){e.state=[],e.states=[],e.appSupport=n;const r=t.props;return r&&(e.propsConfig=function(t,e,n){const o=t.templater;if(o.tagJsType!==s.stateRender){switch(o.propWatch){case ot.IMMUTABLE:return t.propsConfig={latest:e,castProps:n};case ot.SHALLOW:return t.propsConfig={latest:e.map((t=>Z(t,ct))),castProps:n}}return t.propsConfig={latest:e.map((t=>Z(t,ut))),castProps:n}}}(e,r,o)),e}function tt(t,e,n,o,r){const s=G(t,o,r);return s.ownerSupport=e,Q(t,s,n,r)}function et(t,e,n){const o=t.propWatch===ot.DEEP?ut:ct,r=t.props,s=e.propsConfig;let a=s.castProps;const i=n?.propsConfig,l=i?.castProps;l&&(s.castProps=l,a=ze(e,n,n.ownerSupport,r,o));return a||F(r,e,0)}let nt=0;var ot;function rt(t,e=ot.SHALLOW){const n=function(...o){const r=Y(e,o);r.tagJsType=s.tagComponent;const a=function(t,e){return function(n,o,r){const s=et(t,n,r),a=n.ownerSupport,i=tt(t,a,n.appSupport,o,s);return _(t,e,i,s)}}(r,n);return a.original=t,r.wrapper=a,r},o=t;return n.original=t,o.tags=H,o.setUse=T,o.ValueTypes=s,o.tagIndex=nt++,H.push(n),n}function st(){throw new Error("Do not call tag.use as a function but instead set it as: `(props) => tag.use = (use) => html`` `")}function at(t,e){const n=function(t,e,n){const o=Ue(t,e);if(o)return 11;switch(n){case ot.NONE:return 1;case ot.SHALLOW:return lt(t,e);case ot.IMMUTABLE:return it(t,e)}return function(t,e){let n=t,o=e;n=[...t],o=[...e||[]];if(!n.every(((t,e)=>function(t,e,n,o){const s=o[e];if(typeof t===r.object){const e={...t},n={...s||{}},o=Object.entries(e).every((([t,o])=>dt(o,n[t],(()=>{delete e[t],delete n[t]}))));return o}return dt(t,s,(()=>{n.splice(e,1),o.splice(e,1)}))}(t,e,n,o))))return 7;return!1}(t,e)}(e.props,t.propsConfig.latest,t.templater.propWatch);return n}function it(t,e){const n=t.length;for(let o=0;o<n;++o){if(t[o]!==e[o])return 2}return!1}function lt(t,e){const n=t.length;for(let o=0;o<n;++o){const n=t[o],s=e[o];if(f(n)&&f(s)){if(n===s)continue;return 3}if(typeof n!==r.function||typeof s!==r.function)if(typeof n!==r.object){if(n!==s)return 3.3}else if(typeof e===r.object){const t=Object.entries(n);for(const e of t){if(!pt(e,s))return 3.1}}}return!1}!function(t){t.DEEP="deep",t.SHALLOW="shallow",t.NONE="none",t.IMMUTABLE="immutable"}(ot||(ot={})),rt.renderOnce=function(){throw new Error("Do not call tag.renderOnce as a function but instead set it as: `(props) => tag.renderOnce = () => html`` `")},rt.state=st,rt.use=st,rt.route=function(t){throw new Error("Do not call tag.route as a function but instead set it as: `tag.route = (routeProps: RouteProps) => (state) => html`` `")},rt.key=function(t){return{set html(e){e.arrayValue=t}}},rt.app=function(t){throw new Error("Do not call tag.route as a function but instead set it as: `tag.route = (routeProps: RouteProps) => (state) => html`` `")},rt.deepPropWatch=rt,rt.immutableProps=function(t){return rt(t,ot.IMMUTABLE)},rt.watchProps=function(t){return rt(t,ot.SHALLOW)},Object.defineProperty(rt,"renderOnce",{set(t){t.tagJsType=s.renderOnce}}),Object.defineProperty(rt,"state",{set(t){t.original={setUse:T,tags:H},t.tagJsType=s.stateRender}}),Object.defineProperty(rt,"use",{set(t){t.original={setUse:T,tags:H},t.tagJsType=s.stateRender}});const ct=3,ut=10;function dt(t,e,n){if(typeof t!==r.function)return!!W(t,e,ut)&&4;if(typeof e!==r.function)return!1;const o=e?.original;o&&(e=o);t.original&&(t=t.original);return t.toString()===e.toString()?(n(),5):(n(),6)}function pt([t,e],n){const o=n[t];return typeof e===r.function&&typeof o===r.function||o===e}let ft=[],gt=[],ht=[],mt=[],bt=[],vt=[];const yt={locks:0};function wt(){if(!(yt.locks>0)){++yt.locks;for(const t of ft){const e=t.parentNode;e||console.log("xxxxxxx",{toRemove:t,hint:t.hint}),e.removeChild(t)}for(const t of gt)t();for(const[t,e]of ht)e.textContent=t;for(const t of mt)t.relative.appendChild(t.element);for(const{element:t,relative:e}of bt)e.parentNode.insertBefore(t,e);for(const t of vt)t();ft=[],gt=[],mt=[],bt=[],vt=[],ht=[],--yt.locks}}function xt(t,e){const n=document.createTextNode(t);return bt.push({element:n,relative:e}),n}function kt(t){switch(t){case void 0:case!1:case null:return n}return t}function Ct(t){return t.renderCount=0,t.global={}}function St(t){const e=t.subject.global,n=e.providers;if(n)for(const t of n)for(let n=t.children.length-1;n>=0;--n){t.children[n].subject.global===e&&t.children.splice(n,1)}e.destroy$&&e.destroy$.next(),t.subject.renderCount=0}function $t(t){for(const e of t){const t=e.lastArray;if(t){$t(t);continue}const n=e.global;if(!n)continue;const o=n.newest,r=n.subscriptions;r&&r.forEach((t=>t.unsubscribe())),c(o.templater)&&St(o);$t(n.context)}}function jt(t,e=[],n=[]){for(const o of t){const t=o.global;if(!t)continue;const r=t.newest;if(r){e.push(r);const o=t.subscriptions;o&&n.push(...o)}const s=t.context;s&&jt(s,e,n)}return{tags:e,subs:n}}function Tt(t,e){const n=t.subject.global,o=n.htmlDomMeta,r=n.context;n.deleted=!0;const s=n.destroys;if(s)return function(t,e,n,o){const r=[];if(t.forEach((t=>{const e=t();e instanceof Promise&&r.push(e)})),r.length){const t=Promise.all(r).then((()=>{Et(e,n),At(o),wt()}));return void n.push(t)}Et(e,n),At(o),wt()}(s,r,e,o);Et(r,e),At(o)}function Et(t,e){for(const n of t){if(n.withinOwnerElement)continue;const t=n.lastArray;if(t){Ee(n,t);continue}const o=n.simpleValueElm;if(o){delete n.simpleValueElm,ft.push(o);continue}const r=n.global;if(void 0===r)continue;if(!0===r.deleted)continue;r.deleted=!0;const s=r.oldest;s&&Tt(s,e)}}function At(t){t.forEach((t=>{const e=t.marker;e&&ft.push(e);const n=t.domElement;n&&(n.hint="clone remove",ft.push(n))}))}function Vt(t){const e=t.subject.global;e.deleted=!0,t.subject.renderCount=0;const n=[];return $t(e.context),e.destroy$&&St(t),Tt(t,n),n}function Ot(t,e){const n=t.templater,o=e.templater,a=n?.tag||t,i=o.tag;if(n?.tagJsType===s.stateRender)return n.dom===o.dom;switch(a.tagJsType){case s.dom:return i?.tagJsType===s.dom&&function(t,e){const n=t.dom,o=e.dom;return n===o}(a,i);case s.tag:{const n=function(t,e,n,o){const s=t.strings,a=e.strings;if(s.length!==a.length)return!1;if(!s.every(((t,e)=>a[e].length===t.length)))return!1;const i=n.templater.values||t.values,l=o.templater.values||e.values;return function(t,e){const n=t.length===e.length;if(!n)return!1;const o=e.every(((e,n)=>{const o=t[n];if(typeof e===r.function&&typeof o===r.function){return!!(e.toString()===o.toString())}return!0}));if(o)return!0;return!1}(i,l)}(a,i,t,e);return n}}throw new Error(`unknown tagJsType of ${a.tagJsType}`)}function Nt(t,e){const n=e.global,o=n?.newest;if(l(t)){return!Ot(t,o)&&(Vt(o),Ct(e),7)}const r=t?.tagJsType;if(r){return!0===we(e,t,n.newest.ownerSupport)&&-1}return Vt(o),delete e.global,e.renderCount=0,8}function Jt(t,e,n){void 0!==n&&!1!==n&&null!==n?t.setAttribute(e,n):t.removeAttribute(e)}function Pt(t,e,n,o,r,s){switch(o){case"init":{const t=s.added;return void vt.push((()=>{e({target:n,stagger:t})}))}case"destroy":{const t=++s.removed,o=r.subject.global;return o.destroys=o.destroys||[],void o.destroys.push((()=>e({target:n,stagger:t})))}case"autofocus":return void vt.push((()=>n.focus()));case"autoselect":return void vt.push((()=>n.select()));case"style":{const o=t.split(".");return void gt.push((()=>n.style[o[1]]=e))}case"class":return void function(t,e,n){const o=t.split(".");if(o.shift(),e){for(const t of o)gt.push((()=>n.classList.add(t)));return}for(const t of o)gt.push((()=>n.classList.remove(t)))}(t,e,n)}throw new Error(`Invalid special attribute of ${o}. ${t}`)}function Dt(t,e){const n=function(t,e,n=[]){const o=t.subject;n.push({support:t,renderCount:o.renderCount,provider:e});const r=e.children;for(let t=r.length-1;t>=0;--t){const o=r[t],s=o.subject;n.push({support:o,renderCount:s.renderCount,provider:e})}return n}(t,e);return n}function Lt(t,e=[]){const n=t.subject.global,o=Fe(t.templater),r=t.ownerSupport;if(n.locked)return e.push(t),e;if(o)return Lt(r,e);const a=t,i=c(a.templater),l=t.templater.tagJsType,u=r&&l!==s.stateRender&&(!i||function(t,e,n){const o=function(t,e){const n=t.props,o=e.propsConfig,r=o.latest;if(Ue(n,r))return!0;switch(t.propWatch){case ot.IMMUTABLE:return it(n,r);case ot.SHALLOW:return lt(n,r)}return!W(n,r,ut)}(e,n);if(t&&o)return!0;return!1}(r,a.templater,a)),d=function(t){const e=t.subject.global.providers;if(!e)return[];const n=[];for(const t of e){const e=Dt(t.owner,t);n.push(...e.map((t=>t.support)))}return n}(a);return e.push(...d),u?(Lt(r,e),i&&e.push(a),e):(e.push(a),e)}function Mt(t){++yt.locks,t.forEach(zt),--yt.locks,wt()}function zt(t){const e=t.subject.global;e&&Be(e.newest)}T.tagClosed$=new m(void 0,(function(t){_e()||t.next()}));const Rt="no-data-ever",It="promise-no-data-ever";function Wt(t,e){const n=e.subject.global,o=function(t,e){if(!0!==n.deleted)return function(t,e,n,o){let r=e;for(;r.ownerSupport&&!c(r.templater);)r=r.ownerSupport;const s=r.subject.global;s.locked=!0;const a=t.apply(n,o);return function(t,e){const n=e.subject.global;return delete n.locked,function(t,e,n){return Mt(Lt(t)),function(t,e,n){if(function(t){return t&&d(t.then)}(t)){return e.subject.global.locked=!0,t.then((()=>{if(!0===n.deleted)return It;delete e.subject.global.locked;return Mt(Lt(e)),It}))}return Rt}(e,t,n)}(e,t,n)}(a,r)}(o.tagFunction,o.support,t,e)};return o.tagFunction=t,o.support=e,o}const Xt=["init","destroy"];function Yt(t,e,n,o,r,s,a){if(a)return Pt(t,e,n,a,s,r);o(n,t,e)}function Ht(t,e,n,o){const r=t.appElement;"blur"===e&&(e="focusout");const s="_"+e,a=t.subject.global.events;if(!a[e]){const t=function(t){t.originalStopPropagation=t.stopPropagation,Ft(t,s,t.target)};a[e]=t,r.addEventListener(e,t)}n[s]=o,n[e]=o}function Ft(t,e,n){const o=n[e];if(o){let e=!1;if(t.stopPropagation=function(){e=!0,t.originalStopPropagation.call(t)},o(t),t.defaultPrevented||e)return}const r=n.parentNode;r&&Ft(t,e,r)}function Bt(t,e,n,o){const r=function(...e){return r.tagFunction(t,e)};r.tagFunction=e,r.support=n,Ht(n.appSupport,o,t,r)}function Kt(t){if(t.startsWith("class."))return"class";const e=function(t){switch(t){case"autoselect":return"autoselect";case"autofocus":return"autofocus";case"oninit":case"init":return"oninit";case"ondestroy":case"destroy":return"destroy"}return!1}(t);return!1!==e||!!t.startsWith("style.")&&"style"}const Ut={added:0,removed:0};function _t(t,e,n,o){if(n.isNameOnly)return function(t,e,n,o,s,a,i,l){if(n){if(ne(e))return void o.removeAttribute(n);if(typeof n===r.object)if(typeof e===r.object)for(const t in n)t in e||gt.push((function(){o.removeAttribute(t)}));else for(const t in n)gt.push((function(){o.removeAttribute(t)}))}Zt(t,e,o,s,a,i,l)}(t,e,n.value,n.element,o,n.howToSet,[],Ut),void(n.value=e);const s=n.element;Gt(e,n.attrName,n,s,o,n.howToSet,n.isSpecial,Ut),n.value=e}function qt(t,e,n,o,s,a,i,l,c){const d=ee(e);if(d>=0){const e=t[d],r=ue(e,a,!0);return r.isAttr=!0,r.element=n,r.howToSet=s,r.isNameOnly=!0,r.handler=(t,e)=>_t(e,t,r,o),void Zt(t,e,n,o,s,a,l)}const p=ee(c);if(p>=0){const c=t[p],d={isAttr:!0,element:n,attrName:e,checkValueChange:Ae,withinOwnerElement:!0};a.push(d);return u(d.value)?function(t,e,n,o,r,s,a){s&&gt.push((function(){n.removeAttribute(t)}));const i=e.value;if(u(i)){e.handler=oe;const l=function(i){Gt(i,t,e,n,o,r,s,a)},c=i.subscribe(l),u=e.global;(u.subscriptions=u.subscriptions||[]).push(c)}return void Gt(e.value,t,e,n,o,r,s,a)}(e,d,n,o,s,i,l):(d.handler=(t,e)=>_t(e,t,d,o),function(t,e,n,o,s,a,i,l){n.attrName=t,n.element=o,n.howToSet=s,typeof e===r.function?l&&Xt.includes(t)?Pt(t,e,o,t,a,i):te(n,e,a,t,o):(n.attrName=t,n.element=o,n.howToSet=s,n.isSpecial=l,Yt(t,e,o,s,i,a,l))}(e,c,d,n,s,o,l,i),void(d.value=c))}return Yt(e,c,n,s,l,o,i)}function Zt(t,e,o,s,a,i,l){if(!ne(e))if(typeof e!==r.object)0!==e.length&&a(o,e,n);else for(const n in e){const r=e[n];qt(t,n,o,s,a,i,Kt(n),l,r)}}function Gt(t,e,n,o,r,a,i,l){return d(t)?function(t,e,n,o,r,a,i,l){const c=t.templater.wrapper;if((c?.tagJsType||c?.original?.tagJsType)!==s.renderOnce)return te(i,e,t,o,n);return Qt(e,n,o,r,a,t,l)}(r,t,o,e,i,a,n,l):Qt(t,o,e,i,a,r,l)}function Qt(t,e,n,o,r,s,a){if(!1===o){switch(t){case void 0:case!1:case null:return void gt.push((function(){e.removeAttribute(n)}))}if(d(t))return Bt(e,t,s,n);r(e,n,t)}else Pt(n,t,e,o,s,a)}function te(t,e,n,o,r){const s=t.value;return s&&s.tagFunction&&s.support?(s.tagFunction=e,s.support=n,s):Bt(r,e=Wt(e,n),n,o)}function ee(t){return p(t)&&"tagJsVar"in t?t.tagJsVar:-1}function ne(t){return null==t||!1===t}const oe=()=>{},re="object"==typeof document&&document.createElement("div");function se(t,e,o,r,s,a,i,l,c=[]){const u=[];i&&void 0===l&&(l=document.createTextNode(n),mt.push({element:l,relative:i}),i=void 0);for(let n=0;n<t.length;++n){const d=t[n],p={};u.push(p);const f=d.v;if(!isNaN(f)){const t=s.length;le(e[t],t,s,o,c,r,a,i,l);continue}if("text"===d.nn){ie(p,d,i,l);continue}const g=ae(p,d,e,o,s,r,i,l);d.ch&&(p.ch=se(d.ch,e,o,r,s,a+1,g,l,c).dom)}return{subs:c,dom:u,context:s}}function ae(t,e,n,o,r,s,a,i){const l=t.domElement=document.createElement(e.nn);return e.at&&e.at.forEach((t=>{const e=t[0],a=t[1],i=t[2]||!1;qt(n,e,l,o,Jt,r,i,s,a)})),a?mt.push({element:l,relative:a}):bt.push({element:l,relative:i}),l}function ie(t,e,n,o){const r=t,s=r.tc=e.tc;re.innerHTML=s;const a=r.domElement=document.createTextNode(re.innerText);n?mt.push({element:a,relative:n}):bt.push({element:a,relative:o})}function le(t,e,o,r,s,a,i,l,c){const d=document.createTextNode(n),p=ue(t,o,i>0);if(p.placeholder=d,l?mt.push({relative:l,element:d}):bt.push({relative:c,element:d}),u(t))return s.push({insertBefore:d,appendTo:l,subject:t,support:r,counts:a,contextItem:p}),void(p.handler=oe);p.handler=(t,e,n,o)=>be(o,t,n);r.subject.global.locked=!0,De(t,p,r,a,l,c);delete r.subject.global.locked,p.value=t}function ce(t,e,n,o){const r=t.subject.global;r.oldest=t,r.newest=t,++yt.locks;const a=function(t,e,n,o){const r=function(t){const e=t.templater,n=e.tag;if(n.tagJsType===s.dom)return n.dom;return function(t,e){const n=function(t){const e=t.map((t=>t.length));return e.push(t.length),Number(e.join(""))}(t),o=yn[n],r=o&&function(t,e,n){if(n&&n.strings.length===t.length){if(n.strings.every(((e,n)=>e===t[n]))&&n.values.length===e.length)return!0}return!1}(t,e,o);if(r)return o.domMetaMap;const s=function(t,e){rn(t,e);const n=rn(t,e).join(""),o=function(t){const e=[],n=[],o=[];let r=null,s=-1,a=0;const i=new RegExp(on,"g");t=function(t){return t.replace(ln,(function(t){return t.replace(/\[l t\]/g,"[l&nbsp;t]").replace(/\[g t\]/g,"[g&nbsp;t]").replace(/</g,"[l t]").replace(/>/g,"[g t]")}))}(t);for(;a<t.length;){const l=i.exec(t);if(!l)break;const[c,u,d]=l,p=c.startsWith("</"),f=c.endsWith("/>");if(a<l.index){const e=t.slice(a,l.index);if(e.trim()){sn(e).forEach((t=>{t.startsWith(qe)&&(t=qe+ ++s+Ze),an(r,n,t)}))}}if(a=l.index+c.length,p){r=o.pop()||null;continue}const g=[];let h;for(;null!==(h=nn.exec(d));){const t=h[1]||h[3]||h[5];let n=h[2]||h[4]||h[6];if(void 0===t)continue;const o=""!==h[2],r=void 0===n&&o,a=t.toLowerCase(),i=a.startsWith("on")?un(a):a;if(r){if(t.slice(0,qe.length)===qe){const t=qe+ ++s+Ze;e.push(["at",t]),g.push([t]);continue}if(h[0].startsWith(t)&&h[0].slice(t.length,h[0].length).search(/\s+$/)>=0){g.push([i]);continue}n=qe+ ++s+Ze}o||(n=h[2]);const l=[i,n],c=Kt(a);c&&l.push(c),g.push(l)}const m={nn:u};g.length&&(m.at=g),r?(r.ch||(r.ch=[]),r.ch.push(m)):n.push(m),f||(o.push(r),r=m)}if(a<t.length){const e=t.slice(a);if(e.trim()){sn(e).forEach((t=>(t.startsWith(qe)&&++s,an(r,n,t))))}}return n}(n);return o}(t,e),a=fn(s,e.length);i=a,i.forEach(vn);var i;const l={interpolation:void 0,string:void 0,strings:t,values:e,domMetaMap:a};return yn[n]=l,a}(n.strings,n.values)}(t),a=t.templater.tag,i=a.values,l=[],c=t.subject.global;c.context=l;const u=se(r,i,t,e,l,0,n,o);return u}(t,e,n,o);return r.htmlDomMeta=a.dom,--yt.locks,a}function ue(t,e,n){const o={value:t,checkValueChange:Ae,withinOwnerElement:n};return e.push(o),o}function de(t,e,n){const o=e.global.newest;o.ownerSupport=t,e.checkValueChange=Nt;const r=ce(o,n,void 0,e.placeholder);for(const t of r.subs)Le(t);return o}function pe(){return{tagJsType:s.templater}}function fe(t,e,n){const o=function(t,e,n,o,r){const s={templater:t,subject:o,castedProps:r,appSupport:void 0};return s.ownerSupport=e,s.appSupport=n,s}(t,e,e.appSupport,n);return n.global.context=[],o}function ge(t,e,n,o){const r=t[e],s=n[e];if(r===s.value)return;(0,s.handler)(r,t,o,s),s.value=r}function he(t,e){const n=t.subject.global.context;!function(t,e){const n=e.templater.tag||e.templater,o=e.templater.values||n.values,r=t.templater.tag;r.values=o}(t,e),++yt.locks,function(t,e){const n=t.templater.tag.values;let o=0;const r=n.length;for(;o<r;)ge(n,o,e,t),++o}(t,n),--yt.locks,wt()}const me={added:0,removed:0};function be(t,e,n){if(e===t.value)return;const o=t.checkValueChange(e,t);if(-1===o)return;const a=e&&e.tagJsType;if(a){if(a===s.renderOnce)return;we(t,e,n)}else f(e)?ke(t,e,n,{added:0,removed:0}):typeof e!==r.function?o&&function(t,e){e.checkValueChange=Ae;const n=e.placeholder,o=kt(t);e.simpleValueElm=xt(o,n)}(e,t):t.value=e}function ve(t,e,n){if(!e.global.newest)return void Me(t,e,n,{added:0,removed:0});!function(t,e,n){const o=n.global,r=o.newest,a=r.templater.wrapper,i=e.templater.wrapper;let l=!1;const c=e.templater.tagJsType,u=s.stateRender===c||s.renderOnce===c;if(u)l=e.templater.tagJsType===s.renderOnce||Ot(r,e);else if(a&&i){l=a.original===i.original}const d=e.templater;if(!l)return void function(t,e,n){const o=t.global,r=o.oldest;Vt(r),Ct(t);const s=Me(e,t,n,{added:0,removed:0})}(n,d,t);const p=u||at(r,d);if(!p){return void function(t,e,n,o,r){const s=t.props,a=ze(e,n,o,s,r),i=e.propsConfig;i.castProps=a;const l=n.propsConfig;l.latest=i.latest}(d,e,r,t,d.propWatch===ot.DEEP?ut:ct)}if(o.locked)return void o.blocked.push(e);Be(e)}(n,tt(t,n,n.appSupport,e),e)}function ye(t,e,n,o){typeof n!==r.function&&function(t,e,n,o){const r=tt(n.templater||n,o,o.appSupport,e);he(t.subject.global.oldest,r)}(t,e,n,o)}function we(t,e,n){const o=e.tagJsType;if(c(e))return void 0===t.global&&Ct(t),ve(e,t,n),!0;const r=t.global;if(r){const o=r.newest;if(o)return ye(o,t,e,n),!0}switch(o){case s.templater:return de(n,t,me),!0;case s.tag:case s.dom:return function(t,e,n){const o=t;let r=o.templater;r||(r=pe(),o.templater=r,r.tag=o),(e.global?e.global:Ct(e)).newest=fe(r,n,e),de(n,e,me)}(e,t,n),!0}return!1}function xe(t,e,n){n.checkValueChange=Nt;const o=t;let r=o.templater;r||(r=Y(ot.DEEP),r.tag=o,o.templater=r);const s=n.global=Ct(n),a=s.newest=tt(r,e,e.appSupport,n);return s.oldest=a,n}function ke(t,e,n,o,r){t.lastArray||(t.lastArray=[]);const s=t.lastArray;let a=t.placeholder,i=0;const l=[];for(let t=0;t<s.length;++t){const n=s[t],r=je(n,e,t,s,i,o);0!==r?(i+=r,2===r&&(t-=1)):l.push(n)}t.lastArray=l;const c=r,u=e.length;for(let t=0;t<u;++t){a=Ce(e,t,l,n,a,o,c).placeholder}}function Ce(t,e,n,o,r,s,a){const i=t[e],l=n[e];return l?function(t,e,n,o,r,s,a,i){const l=n.length>r;if(l)return be(e,t,o),e;const c=Se(t,s,o,a,n,i);return c}(i,l,n,o,e,r,s,a):Se(i,r,o,s,n,a)}function Se(t,e,n,o,r,a){const i={value:t,checkValueChange:Ae,withinOwnerElement:!1};o.added=o.added+1;const l=document.createTextNode("");return i.placeholder=l,a||bt.push({element:l,relative:e}),function(t,e,n){const o=t.tagJsType;if(o)switch(o){case s.templater:xe(t.tag,e,n);break;case s.tag:case s.dom:xe(t,e,n)}}(t,n,i),De(t,i,n,o,a),i.value=t,r.push(i),a&&mt.push({element:l,relative:a}),i}function $e(t,e){const n=t.global;if(n){const t=n.oldest;n.deleted=!0,Vt(t),n.deleted=!0}else{const e=t.simpleValueElm;delete t.simpleValueElm,ft.push(e)}++e.removed}function je(t,e,n,o,r,s){const a=e.length-1,i=n-r,l=i<0||a<i,c=o[n];return l?(console.log("lessLength destroy array item",{at:i}),$e(c,s),++r,1):o[n].value.arrayValue!==e[n].arrayValue?(console.log("destroy unequal array item",{at:i}),$e(c,s),o.splice(n,1),++r,2):0}function Te(t,e){if(!f(t)){return Ee(e,e.lastArray),9}return!1}function Ee(t,e){const n={added:0,removed:0};for(let t=0;t<e.length;++t)$e(e[t],n);delete t.lastArray}function Ae(t,e){if(null==t||typeof t!==r.object)return function(t,e){const n=kt(t),o=e.simpleValueElm;ht.push([n,o])}(t,e),-1;const n=e.simpleValueElm;return delete e.simpleValueElm,ft.push(n),6}function Ve(t,e){const n=t.rearray;n.length&&n.length!==t.stateArray.length&&function(t,e,n){const o=`Saved states between renders are inconsistent. Expected ${t.length} states got ${n.stateArray.length}.`,r=e.templater?.wrapper;let s=r;(r?.original||r?.original)&&(s=r.original);const a={oldStates:n.stateArray,newStates:n.rearray,tagFunction:s,templater:e.templater},i=new M(o,a);throw console.error(Oe,a),i}(n,e,t)}const Oe="State tracking requires same number of state calls on every render. This error typically occurs when a state call is only reachable behind a condition. Also, wrapping tags that have state, with tag(), often helps when tag is only reachable by a condition.";function Ne(t,e){const n=t.subject;++n.renderCount;const o=T.stateConfig;delete o.support,t.state=o.stateArray,T.tagClosed$.next(e),Ve(o,t),n.global.newest=t}function Je(t,e,n,o){const r=n.global,a=n.renderCount,i=e?.state,l=T.stateConfig;if(i){const n=e.states;l.prevSupport=e,k(t,T.stateConfig,i,n)}else x(t,l);const c=t.templater;let u;if(c.tagJsType===s.stateRender){u=_(c,c,tt(c,o,t.appSupport,n)),u.states=t.states}else{u=(0,c.wrapper)(t,n,e),u.states=t.states}return Ne(u,o),n.renderCount>a+1?r.newest:u}function Pe(t,e,n,o,r,s){n.checkValueChange=Nt;const a=fe(t,e,n);a.ownerSupport=e;const i=ce(a,o,r,r?void 0:s);for(const t of i.dom)t.marker&&(r?mt.push({element:t.marker,relative:r}):bt.push({element:t.marker,relative:s})),t.domElement&&(r?mt.push({element:t.domElement,relative:r}):bt.push({element:t.domElement,relative:s}));let l=-1;const c=i.subs.length-1;for(;l++<c;){Le(i.subs[l])}return a}function De(t,e,n,o,r,a){const i=t?.tagJsType;return i?function(t,e,n,o,r,a,i){switch(t){case s.templater:return e.checkValueChange=Nt,a?Pe(n,o,e,r,a,i):de(o,e,r);case s.dom:case s.tag:{e.checkValueChange=Nt;const t=n;let s=t.templater;s||(s=function(t){const e=pe();return e.tag=t,t.templater=e,e}(t));const l=Ct(e);return a?Pe(s,o,e,r,a,i):(l.newest=fe(s,o,e),e.checkValueChange=Nt,de(o,e,r))}case s.stateRender:case s.tagComponent:if(Ct(e),e.checkValueChange=Nt,a){const t=function(t,e,n,o,r){const a=tt(t,n,n.appSupport,e),i=a.propsConfig;if(i){const e=t.tagJsType!==s.tagComponent?[]:et(t,a);i.castProps=e}const l=e.global,{support:c}=Xe(a,l.newest,e,n);return function(t,e,n){let o=mt.length;const r=ce(t,e,n,void 0);for(const t of r.dom)t.domElement&&mt.splice(o++,0,{element:t.domElement,relative:n}),t.marker&&mt.splice(o++,0,{element:t.marker,relative:n});const s=r.subs;for(const t of s)Le(t)}(c,o,r),c}(n,e,o,r,a);return t}return Me(n,e,o,r);case s.renderOnce:{Ct(e);const t=function(t,e,n){const o=Y(ot.DEEP);o.tagJsType=t.tagJsType;const r=fe(o,n,e);function s(){return o.tag=t(),r}return o.wrapper=s,s.tagJsType=t.tagJsType,s.original=t.original||t,r}(n,e,o);Je(t,void 0,e,o);const s=Pe(t.templater,o,e,r,a,i);return e.checkValueChange=Nt,s}}}(i,e,t,n,o,r,a):f(t)?(ke(e,t,n,o,r),void(e.checkValueChange=Te)):void(u(t)||function(t,e,n){const o=kt(t),r=xt(o,n);e.simpleValueElm=r,e.checkValueChange=Ae}(t,e,e.placeholder))}function Le({subject:t,support:e,counts:n,contextItem:o,appendTo:r}){let s=function(t){De(t,o,e,{...n},a?r:void 0),a||T.stateConfig.support||wt(),s=function(t){!function(t,e,n){t!==e.value&&(be(e,t,n),T.stateConfig.support||wt())}(t,o,e)}};let a=!0;const i=t.subscribe((function(t){s(t)}));o.subject=t,a=!1;const l=e.subject.global;(l.subscriptions=l.subscriptions||[]).push(i)}function Me(t,e,n,o){const r=tt(t,n,n.appSupport,e),a=r.propsConfig;if(a){const e=t.tagJsType!==s.tagComponent?[]:et(t,r);a.castProps=e}const i=e.global,{support:l}=Xe(r,i.newest,e,n);return function(t,e,n){n.checkValueChange=Nt;const o=ce(t,e,void 0,n.placeholder).subs;for(const t of o)Le(t)}(l,o,e),l}function ze(t,e,n,o,r,s=-1){const a=e.subject.global.newest;if(!a){const e=F(o,t,s);o.push(...e);return t.propsConfig.castProps=e,o}const i=(e=a||e).propsConfig.castProps,l=[];for(let e=0;e<o.length;++e){const a=o[e],c=Re(i[e],a,t,n,s+1,r);l.push(c)}return t.propsConfig.castProps=l,l}function Re(t,e,n,o,s,a){return typeof t===r.function?e.mem?(t.mem=e.mem,e):(t.mem=e,t):a===s||U(e)?e:f(e)?function(t,e,n,o,r){for(let s=t.length-1;s>=0;--s){const a=t[s];t[s]=Re(e[s],a,n,o,r+1,s)}return t}(e,t,n,o,a):void 0===t?e:function(t,e,n,o,r,s){const a=Object.keys(t);for(const i of a){const a=t[i],l=Re(e[i],a,n,o,s,r+1);if(t[i]===l)continue;const c=Object.getOwnPropertyDescriptor(t,i)?.set;c||(t[i]=l)}return t}(e,t,n,o,a,s)}function Ie(t){const e=t.subject.global,{subs:n,tags:o}=jt(e.context);We(t);for(const t of o)We(t);e.subscriptions&&n.forEach((t=>t.unsubscribe())),Ct(t.subject)}function We(t){const e=t.subject,n=e.global;!0!==n.deleted&&(n.deleted=!0,e.renderCount=0,Tt(t,[]))}function Xe(t,e,n,o){const r=e?.templater,a=r?.tag,i=Je(t,e,n,o),l=!e||Ot(e,i);if(l){if(e){const t=e.templater.tag;t&&n.renderCount>0&&function(t,e,n){if(t.tagJsType===s.dom){const o=n?.dom;return void(o!==t.dom&&Ie(e))}if(n){const o=n.strings;if(o){const n=o?.length;n!==t.strings.length&&Ie(e)}}}(t,e,a)}}else{!function(t,e){const n=t.subject.global;let o=-1;const r=n.providers=n.providers||[],s=r.length-1;for(;o++<s;){const t=r[o];let s=-1;const a=t.children.length-1;for(;s++<a;)if(n===t.children[s].subject.global)return t.children.splice(s,1),void t.children.push(e)}}(e,i),Ie(e);const t=i.subject.global;t.oldest=i,t.newest=i}const c=e?.ownerSupport;return i.ownerSupport=o||c,{support:i,wasLikeTags:l}}const Ye={added:0,removed:0};function He(t,e,n,o){const r=o.global,{support:s,wasLikeTags:a}=Xe(e,t,o,n);return a?(he(r.oldest,s),s):(de(n,o,Ye),s)}function Fe(t){return s.templater===t.tagJsType}function Be(t){const e=t.subject.global,n=Fe(t.templater),o=t.ownerSupport;if(e.locked)return e.blocked.push(t),t;if(n)return Ke(o,t);e.locked=!0;const r=t.subject;e.blocked.length&&(t=e.blocked.pop(),e.blocked=[]),delete e.locked;return He(e.newest,t,o,r)}function Ke(t,e){const n=t.subject.global;if(!n||!0===n.deleted)return e;return Be(n.newest||t)}function Ue(t,e){return t.length!==e.length}new z("callback() was called outside of synchronous rendering. Use `callback = callbackMaker()` to create a callback that could be called out of sync with rendering");function _e(){return T.stateConfig.support}const qe=":tagvar",Ze=":";const Ge="ondoubleclick",Qe=/(:tagvar\d+:)/,tn=/(^:tagvar\d+:|:tagvar\d+:$)/g,en="__safeTagVar",nn=/([:_a-zA-Z0-9\-.]+)\s*(?:=\s*"([^"]*)"|=\s*(\S+))?/g,on=/<\/?([a-zA-Z0-9-]+)((?:\s+[a-zA-Z_:][\w:.-]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)+\s*|\s*)\/?>/g;function rn(t,e){return function(t,e){const n=t.map(((t,n)=>n<e.length?t+qe+n+Ze:t));return function(t,e,n){const o=n.length-e.length;if(o>0)for(let n=o;n>0;--n)t.push(qe+(e.length+n-1)+Ze)}(n,t,e),n}(t.map((t=>t.replace(tn,((t,e)=>en+e)))),e)}function sn(t){return t.split(Qe).filter((t=>""!==t))}function an(t,e,n){!function(t,e,n){t?(t.ch||(t.ch=[]),t.ch.push(n)):e.push(n)}(t,e,{nn:"text",tc:cn(n)})}const ln=new RegExp("(\x3c!--[\\s\\S]*?--\x3e)","g");function cn(t){return t.replace(/(\[l t\]!--[\s\S]*?--\[g t\])/g,(function(t){return t.replace(/\[l t\]/g,"<").replace(/\[g t\]/g,">").replace(/\[l&nbsp;t\]/g,"[l t]").replace(/\[g&nbsp;t\]/g,"[g t]")}))}function un(t){if(t.startsWith("on")){return t.length===Ge.length&&t===Ge?"dblclick":t.slice(2,t.length)}return t}const dn=new RegExp(qe+"(\\d+)"+Ze,"g"),pn="ch";function fn(t,e,n=[],o=[]){const r=t;for(let t=0;t<r.length;t++){const s=[...o,t],a=r[t];if(a.at){const t=a.at;a.at=hn(t,e)}if(a.ch){const t=a.ch,o=[...s,pn];a.ch=fn(t,e,n,o)}t=gn(a,e,r,t)}return r}function gn(t,e,n,r){if("text"!==t.nn)return r;const s=t;let a,i=s.tc;if(typeof i!==o.string)return r;for(;null!==(a=dn.exec(i));){const t=a[1],o=parseInt(t,10);if(!isNaN(o)&&o<e){const t=qe+o+Ze,e=i.slice(a.index+t.length);n.splice(r,1,{nn:"text",v:o}),i=e,dn.lastIndex=0}}return s.tc=i,r}function hn(t,e){return t.map((t=>{const[n,r,s]=t;if(n.startsWith(qe)){const t=parseInt(n.replace(qe,""),10);if(!isNaN(t)&&t<e)return[{tagJsVar:t}]}if(typeof r===o.string&&r.startsWith(qe)){const t=parseInt(r.replace(qe,""),10);if(!isNaN(t)&&t<e)return[n,{tagJsVar:t},s]}return t}))}const mn="__safeTagVar";const bn=/__safeTagVar(\d+)/g;function vn(t){if(t.at&&(t.at=t.at?t.at.map((t=>{if(1===t.length)return t;const[,e]=t;if(typeof e===o.string&&e.startsWith(mn)){const n=parseInt(e.replace(mn,""),10);t[1]=qe+n+Ze}return t})):[]),t.ch){const e=t.ch;for(let t=0;t<e.length;t++){const n=e[t];if("text"===n.nn){if(typeof n.tc!==o.string)return;n.tc=n.tc.replace(bn,((t,e)=>qe+e+Ze))}vn(n)}0===e.length&&delete t.ch}}const yn={};function wn(t,...e){const n=function(t,e){const n={values:e,ownerSupport:_e(),tagJsType:s.tag,strings:t,key:t=>(n.arrayValue=t,n),html:function(t,e){return n.children={strings:t,values:e},n}};return n}(t,e),o=Y(ot.NONE);return o.tag=n,n.templater=o,n}wn.dom=function(t,...e){return function(t,e){const n={values:e,ownerSupport:_e(),dom:t,tagJsType:s.dom,key:function(t){return n.arrayValue=t,n},html:{dom:function(t,e){return n.children={dom:t,values:e},n}}};return n}(t,e)};const xn=[];function kn(t,e,n){const o=xn.findIndex((t=>t.element===e));o>=0&&(Vt(xn[o].support),xn.splice(o,1),console.warn("Found and destroyed app element already rendered to element",{element:e}));let a=()=>u(n);a.propWatch=ot.NONE,a.tagJsType=s.stateRender,a.props=[n],a.isApp=!0;const i=function(t,e){const n={value:t,checkValueChange:Nt,withinOwnerElement:!1,renderCount:0,global:void 0},o=Ct(n);return o.events={},Cn(t,n,e),n}(a,e),l=i.global;x(l.newest,T.stateConfig);let u=t(n);const d=typeof u==r.function;d||(c(u)?(l.newest.propsConfig={latest:[n],castProps:[n]},a.propWatch=u.propWatch,a.tagJsType=u.tagJsType,a.wrapper=u.wrapper,a=u):(a.tag=u,u=t));const p=document.createTextNode("");H.push(a.wrapper||{original:a});const f=function(t,e,n,o,r){o.placeholder=e;const a=o.global,i=a.newest,l=a.oldest;i!==l&&k(i,T.stateConfig,l.state,l.states);if(t.tagJsType===s.stateRender){const e=t.wrapper||{original:t};if(!r){const e=Cn(t,o,n);return Ne(e),e}const s=_(t,e,i);return Ne(s),s}const c=t.wrapper,u=c(i,o);return Ne(u),u}(a,p,e,i,d);if(l.isApp=!0,d&&(u.tag=f.templater.tag),!e)throw new Error(`Cannot tagElement, element received is type ${typeof e} and not type Element`);e.destroy=function(){const t=l.events;for(const n in t){const o=t[n];e.removeEventListener(n,o)}l.events={};const n=Vt(f);return wt(),n},++yt.locks;const g=ce(f,{added:0,removed:0},e,void 0);l.oldest=f,l.newest=f;let h=a.setUse;if(a.tagJsType!==s.stateRender){const e=t.original;h=e.setUse,e.isApp=!0}e.setUse=h,e.ValueTypes=s,xn.push({element:e,support:f});const m=document.createDocumentFragment();m.appendChild(p);for(const t of g.dom)Sn(t,m);for(const t of g.subs)Le(t);return--yt.locks,wt(),e.appendChild(m),{support:f,tags:H,ValueTypes:s}}function Cn(t,e,n){const o=e.global,r=G(t,e);return Q(t,r,r),r.appElement=n,o.oldest=o.oldest||r,o.newest=r,r}function Sn(t,e){t.domElement&&e.appendChild(t.domElement),t.marker&&e.appendChild(t.marker)}const $n={tagElement:kn,renderWithSupport:Xe,renderSupport:Be,renderTagOnly:Je,paint:wt},jn=rt((({name:t,array:e,included:n,columnNames:o,allColumnNames:r})=>{let s,a=!1,i=!1;const l=v([]);P((t=>[{mouseOverEditShow:a,edit:i,editFormula:s}]=t({mouseOverEditShow:a,edit:i,editFormula:s})));return wn`
    <a onclick=${function(){const e=o.indexOf(t);e>=0?o.splice(e,1):o.push(t)}} style="cursor:pointer;">
      <input type="checkbox" ${n&&"checked"} />&nbsp;${t}
    </a>

    <div
      onmouseover=${()=>a=!0}
      onmouseout=${()=>a=!1}
    >
      <a style.visibility=${i||a?"visible":"hidden"}
        onclick=${()=>i=!i}
      >⚙️&nbsp;</a>
      
      ${n&&o.length!==r.length?wn`
        <a style="color:blue;" onclick=${()=>{o.length=0,o.push(...r)}}><small>all</small></a>
      `:wn`
        <a style="color:blue;" onclick=${()=>{o.length=0,o.push(t)}}><small>only</small></a>
      `}
    </div>

    ${i&&wn`
      <div style="width:100%;padding:0.3em;">
        <div style="font-size:0.7em;text-align:center;">
          <strong>Column Settings</strong>
        </div>
        <div>
          ${s&&wn`
            <div style="padding:0.3em;">
              <strong>edit formula</strong>
            </div>
            <textarea wrap="off"
              onchange=${t=>{return n=s,o=t.target.value,n.stringFormula=o,void(n.value=Tn(o,{array:e}));var n,o}}
            >${s.value}</textarea>
          `}
          <div style="display:flex;flex-wrap:wrap;gap:1em">
            ${l.map((t=>wn`
                <div>
                  <div>
                    <strong>${t.title}</strong>
                    <a onclick=${()=>s=t}>✏️</a>
                  </div>
                  <div>${t.value}</div>
                </div>
              `.key(t)))}
          </div>
          <button type="button" onclick=${()=>{const n=`\n      array.reduce((all, item) => {\n        const value = item['${t}']\n        return isNaN(value) ? all : (all + value)\n      }, 0)\n    `;l.push({title:"sum",stringFormula:n,value:Tn(n,{array:e})})}}>sum</button>
        </div>
      </div>
    `}
  `}));function Tn(t,e={}){return function(t,e){if(!t)return t;return e=new Proxy(e,{has:()=>!0}),new Function("with(this) { return ("+t+")}").call(e)}(t,{isNaN,Math,Number,Date,...e})}const En=rt((({array:t,showAll:e,showKids:n,toggleColumnDialog:o,columnNames:r,formatChange:s,allowMaximize:a,everySimpleValue:i})=>wn`<!-- array table -->
    <!-- overflow-y: scroll; -->
    <div style="max-height: 800px;max-width:100vw;overflow: scroll;">
      <table cellPadding="2" cellSpacing="2" border="0">
        ${t.length&&wn`
          <thead style="position: sticky;top: 0;font-size: 0.8em;">
            <tr>
              ${r.map((t=>wn`
                <th
                  style.cursor=${o&&"pointer"}
                  onclick=${o}
                >${t}</th>
              `.key(t)))}
            </tr>
          </thead>
        `}
        <tbody>
          ${t.map((t=>wn`
            <tr>
              ${r.map((o=>wn`
                <td>
                  ${Rn({value:t[o],showLevels:0,showAll:e,showKids:e||n,isRootDump:!1,formatChange:s,allowMaximize:a})}
                </td>
              `.key(t[o])))}
            </tr>
          `.key(t)))}
        </tbody>
      </table>
    </div>
  `)),An=rt((({array:t,showLevels:e,showAll:n,showKids:o,columnNames:r,formatChange:s,toggleColumnDialog:a,allowMaximize:i,everySimpleValue:l})=>wn`
    ${t.map(((t,c)=>wn`${Rn({value:Vn(t,r),showLevels:e,showAll:n,showKids:n||o,isRootDump:!1,formatChange:s,onHeaderClick:a,allowMaximize:i,everySimpleValue:l})}`.key({item:t,index:c})))}
  `));function Vn(t,e){return["string","number","boolean"].includes(typeof t)?t:function(t,e){const n={};return e.forEach((e=>{t.hasOwnProperty(e)&&(n[e]=t[e])})),n}(t,e)}const On=rt((({showLevels:t,showAll:e,showKids:n,array:o,arrayView:r,formatChange:s,allowMaximize:a,everySimpleValue:i})=>{const l=o.length?Object.keys(o[0]):[];let c=l,u=!1,d=v("columnDialog"+performance.now());P((t=>[{columnNames:c,showColumnDialog:u}]=t({columnNames:c,showColumnDialog:u})));const p=()=>{u=!u;const t=document.getElementById(d);u?t.showModal():t.close()};return wn`
    ${"table"===r?En({showAll:e,showKids:n,array:o,toggleColumnDialog:p,columnNames:c,formatChange:s,everySimpleValue:i}):An({array:o,showLevels:t,showAll:e,showKids:n,formatChange:s,columnNames:c,toggleColumnDialog:p,allowMaximize:a,everySimpleValue:i})}

    <dialog id=${d} class="dump-dialog" style="padding:0"
      onmousedown="var r = this.getBoundingClientRect();(r.top<=event.clientY&&event.clientY<=r.top+r.height&&r.left<=event.clientX&&event.clientX<=r.left+r.width) || this.close()"
      ondragstart="const {e,dt,t} = {t:this,e:event,dt:event.dataTransfer};const d=t.drag=t.drag||{x:0,y:0};d.initX=d.x;d.startX=event.clientX-t.offsetLeft;d.startY=event.clientY-t.offsetTop;t.ondragover=e.target.ondragover=(e)=>e.preventDefault();dt.effectAllowed='move';dt.dropEffect='move'"
      ondrag="const {t,e,dt,d}={e:event,dt:event.dataTransfer,d:this.drag}; if(e.clientX===0) return;d.x = d.x + e.offsetX - d.startX; d.y = d.y + e.offsetY - d.startY; this.style.left = d.x + 'px'; this.style.top = d.y+'px';"
      ondragend="const {t,e,d}={t:this,e:event,d:this.drag};if (d.initX === d.x) {d.x=d.x+e.offsetX-(d.startX-d.x);d.y=d.y+e.offsetY-(d.startY-d.y);this.style.transform=translate3d(d.x+'px', d.y+'px', 0)};this.draggable=false"
      onclose=${()=>{u=!1}}
    >
      <div
        style="padding:.25em;background-color:#666;color:white;"
        onmousedown="this.parentNode.draggable=true"
      >Column Modifier</div>
      <div style="padding:.25em">
        ${l.map((t=>{const e=c.includes(t);return wn`
            <div
              style="display:flex;justify-content: space-between;flex-wrap:wrap"
              class="hover-bg-warning"
            >
              ${jn({name:t,array:o,included:e,columnNames:c,allColumnNames:l})}
            </div>
          `.key(t)}))}
        <button style="width:100%" type="button" onclick=${p}>🅧 close</button>
      </div>
    </dialog>
  `})),Nn=rt((({key:t,value:e,show:n,showAll:o,showKids:r,showLevels:s,formatChange:a,allowMaximize:i,everySimpleValue:l})=>{let c,u,d=!1;P((t=>[{showValue:c,arrayView:u,maximize:d}]=t({showValue:c,arrayView:u,maximize:d}))),A.noInit([n],(([t])=>c=t));const p=v((()=>"maximize-dump-"+performance.now())),f=()=>{d=!d,d&&document.getElementById(p).showModal()},g=n=>wn`
    <div
      style=${"padding:0.2em;display:flex;justify-content:space-between;flex-grow:1;font-size:65%;border-color:white;color:white;background-color:#ef473a;"+(c?"border-bottom-width:1px;border-bottom-style:solid;border-color:black;":"")}
    >
      <a style="flex-grow:1" onclick=${()=>{c=!c}}>
        <strong>${t}</strong>
      </a>
      <sup style="opacity:80%;font-size:75%;padding-left:0.4em">
        <a style="text-decoration:underline;" style.font-weight=${"table"===u?"bold":""}
          onclick=${()=>u="table"===u?void 0:"table"}>${"table"===u?"flex":"table"}</a>
      </sup>
      <sup style="opacity:80%;font-size:75%;padding-left:0.4em">[${e.length}]</sup>
      ${n&&wn`
        &nbsp;<a onclick=${f}><span style="width:10px;height:10px;border:1px solid white;border-top-width:3px;display:inline-block;"></span></a>
      `}
    </div>
  `,h={showLevels:s,showAll:o,showKids:r,formatChange:a,array:e,arrayView:u,allowMaximize:i,everySimpleValue:l},m=wn`
    <!-- array displays wrap -->
    <div style="text-align:left;display:flex;flex-wrap:wrap;margin:0.2em;gap:0.2em">
      ${On(h)}
    </div>
  `;return wn`<!-- array -->
  <div
    style="color:#111111;background-color:#f2dede;border:1px solid black;border-radius:5px;flex-direction: column;display:flex"
  >
    ${g(i)}
    ${(o||c||r||null==c&&s>0)&&m}
  </div>

  <!-- maximize -->
  <dialog id=${p} class="dump-dialog" style="padding:0"
    onmousedown="var r = this.getBoundingClientRect();(r.top<=event.clientY&&event.clientY<=r.top+r.height&&r.left<=event.clientX&&event.clientX<=r.left+r.width) || this.close()"
    ondragstart="const {e,dt,t} = {t:this,e:event,dt:event.dataTransfer};const d=t.drag=t.drag||{x:0,y:0};d.initX=d.x;d.startX=event.clientX-t.offsetLeft;d.startY=event.clientY-t.offsetTop;t.ondragover=e.target.ondragover=(e)=>e.preventDefault();dt.effectAllowed='move';dt.dropEffect='move'"
    ondrag="const {t,e,dt,d}={e:event,dt:event.dataTransfer,d:this.drag}; if(e.clientX===0) return;d.x = d.x + e.offsetX - d.startX; d.y = d.y + e.offsetY - d.startY; this.style.left = d.x + 'px'; this.style.top = d.y+'px';"
    ondragend="const {t,e,d}={t:this,e:event,d:this.drag};if (d.initX === d.x) {d.x=d.x+e.offsetX-(d.startX-d.x);d.y=d.y+e.offsetY-(d.startY-d.y);this.style.transform=translate3d(d.x+'px', d.y+'px', 0)};this.draggable=false"
  >
    <div style="padding:.25em" onmousedown="this.parentNode.draggable=true">
      ${d&&g(!1)}
    </div>
    
    ${d&&wn`
      <div style="text-align:left;display:flex;flex-wrap:wrap;margin:0.2em;gap:0.2em">
        ${On({...h,allowMaximize:!1})}
      </div>
    `}

    <div style="padding:.25em">
      <button type="button" onclick=${()=>document.getElementById(p).close()} style="width:100%">🅧 close</button>
    </div>
  </dialog>

  `}));function Jn(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(e)}function Pn({key:t,value:e,onHeaderClick:n,everySimpleValue:o}){const r=e.search&&("https://"===e.slice(0,8)||"http://"===e.slice(0,7));let s;return s=o?Dn({value:e,everySimpleValue:o}):r?Ln(e):Dn({value:e}),wn`
    <div style="font-size:75%;flex:1 1 10em;color:#111111">
      ${t&&wn`
        <div style="border-bottom-width:1px;border-bottom-style:solid;border-color:black;font-size:65%;border-color:white;line-height: 95%;font-weight:bold;"
          style.cursor=${n&&"pointer"}
          onclick=${n}
        >${t}</div>
      `}
      ${s}
    </div>
  `}const Dn=rt((({value:t,everySimpleValue:e})=>{const n=[void 0,null,"null"].includes(t),o=t,r=!isNaN(o)&&o>1e9?function(t){return t>9467028e5?"Milliseconds > Unix epoch:\n"+new Date(t).toLocaleString():"Seconds > Unix epoch:\n"+new Date(1e3*t).toLocaleString()}(o):"";let s=0;P((t=>[s]=t(s)));let a=t;return e&&(a=e(t)),a=(null===a?"null":!1===a&&"false")||void 0===a&&"undefined"||a,wn`
    <div class="hover-bg-warning active-bg-energized"
      onmousedown=${()=>{s=Date.now()}}
      onmouseup=${e=>{if(Date.now()-s>300)return e.preventDefault(),e.stopPropagation(),!0;Jn(t)}}
      style="cursor:pointer;"
      style.background-color=${n?"rgba(0,0,0,.5)":""}
      style.color = ${(!0===t?"#28a54c":!1===t&&"#e42112")||n&&"white"||""}
      title=${r}
    >${a}</div>
  `}));const Ln=t=>wn`
    <a onclick=${()=>Jn(t)} href=${t}
      target="_blank"
      class="hover-bg-warning active-bg-energized"
      title="tap to copy"
    >${t}</a>
  `,Mn=rt((({key:t,showKids:e,show:n,showLevels:o,value:r,showAll:s,onHeaderClick:a,formatChange:i,allowMaximize:l,everySimpleValue:c})=>{let u=!1,d=!1;const p=v((()=>"maximize-dump-"+performance.now()));P((t=>[{showLower:u,maximize:d}]=t({showLower:u,maximize:d}))),A.noInit([n],(([t])=>u=t));const f=!t||e||u||null==u&&o>0,g=()=>{d=!d,d&&document.getElementById(p).showModal()},h=e=>wn`
    <div style=${"padding:0.2em;display:flex;justify-content:space-between;font-size:65%;color:white;border-color:white;flex-grow:1;background-color:#387ef5;"+(u?"border-bottom-width:1px;border-bottom-style:solid;border-color:black;":"")}
    >
      <a onclick=${()=>u=!u}>
        <strong>${t}</strong>
        <sup style="opacity:80%;font-size:75%;padding-left:0.4em">
          {${Object.keys(r).length}}
        </sup>
      </a>
      ${e&&wn`
        &nbsp;<a onclick=${g}><span style="width:10px;height:10px;border:1px solid white;border-top-width:3px;display:inline-block;"></span></a>
      `}
    </div>
  `,m=t=>wn`
    <div style="display:flex;flex-wrap:wrap">
      ${Object.entries(r).map((([n,r])=>wn`
        <!-- recurse -->
        <div class="child-margin-xxs"
          style=${"padding:0.2em;overflow:auto;display:flex;flex-wrap:wrap;"+(r&&"object"==typeof r?"flex-grow:1;":"flex: 1 1 10em;")}
        >
          ${Rn({value:r,key:n,show:u,showAll:s,showLevels:o-1,showKids:s||e,isRootDump:!1,formatChange:i,onHeaderClick:a,allowMaximize:t,everySimpleValue:c})}
      `.key([n,r])))}
    </div>
  `;return wn`
    <div style="flex: 1 1 10em;text-align:left;">
      <div
        style="font-size:90%;color:#111111;background-color:#d9edf7;border:1px solid black;border-radius:5px;flex-direction: column;display:flex;"
      >
        ${t&&h(l)}
        ${f&&m(l)}

        <!-- maximize -->
        <dialog id=${p} class="dump-dialog" style="padding:0"
          onmousedown="var r = this.getBoundingClientRect();(r.top<=event.clientY&&event.clientY<=r.top+r.height&&r.left<=event.clientX&&event.clientX<=r.left+r.width) || this.close()"
          ondragstart="const {e,dt,t} = {t:this,e:event,dt:event.dataTransfer};const d=t.drag=t.drag||{x:0,y:0};d.initX=d.x;d.startX=event.clientX-t.offsetLeft;d.startY=event.clientY-t.offsetTop;t.ondragover=e.target.ondragover=(e)=>e.preventDefault();dt.effectAllowed='move';dt.dropEffect='move'"
          ondrag="const {t,e,dt,d}={e:event,dt:event.dataTransfer,d:this.drag}; if(e.clientX===0) return;d.x = d.x + e.offsetX - d.startX; d.y = d.y + e.offsetY - d.startY; this.style.left = d.x + 'px'; this.style.top = d.y+'px';"
          ondragend="const {t,e,d}={t:this,e:event,d:this.drag};if (d.initX === d.x) {d.x=d.x+e.offsetX-(d.startX-d.x);d.y=d.y+e.offsetY-(d.startY-d.y);this.style.transform=translate3d(d.x+'px', d.y+'px', 0)};this.draggable=false"
        >
          <div style="padding:.25em" onmousedown="this.parentNode.draggable=true">
            ${d&&h(!1)}
          </div>
          
          ${d&&m(!1)}

          <div style="padding:.25em">
            <button type="button" onclick=${()=>document.getElementById(p).close()} style="width:100%">🅧 close</button>
          </div>
        </dialog>
      </div>
    </div>
  `})),zn=rt((({value:t,format:e,showAll:n,formatChange:o,showAllChange:r})=>wn`
    <style>
      dialog.dump-dialog::backdrop {
        background-color: rgba(0, 0, 0, 0.7); /* Set a semi-transparent black background */
      }

      .child-margin-xxs {margin:0.2em;}
      
      .taggedjs-dump .hover-bg-warning:hover {background-color:#fcf8e3}
      .taggedjs-dump .hover-bg-balanced:hover {background-color:#33cd5f}
      .taggedjs-dump .active-bg-energized:active {background-color:#ffc900}
      .taggedjs-dump .bg-dark {background-color:#444444}
      .taggedjs-dump .bg-balanced {background-color:#33cd5f}
    </style>
    <div style="width: 100%;line-height: 90%;">
      <div style="position:relative;">
        <div style="display:flex;font-size:50%;position:absolute;top:-18px;right:-6px">
          ${!e||"flex"===e&&wn`
            <a
              style=${"margin:1px;border-radius:5px;color:white;align-items:center;display:flex;padding-left:0.2em;padding-right:0.2em;"+(n?"background-color:#33cd5f;":"background-color:#444444")}
              class="hover-bg-balanced"
              onclick=${()=>r(n=!n)}
              title="hide/show all sub objects"
            >👁</a>
          `}
          <a
            style=${"margin:1px;border-radius:5px;color:white;align-items:center;display:flex;padding-left:0.2em;padding-right:0.2em;"+(e&&"flex"!==e?"background-color:#444444":"background-color:#33cd5f;")}
            class="hover-bg-balanced"
            onclick=${()=>o(e="flex")}
          >flex</a>
          <a style=${"margin:1px;border-radius:5px;color:white;align-items:center;display:flex;padding-left:0.2em;padding-right:0.2em;"+("json"===e?"background-color:#33cd5f;":"background-color:#444444")}
            class="hover-bg-balanced"
            onclick=${()=>o(e="json")}
          >json</a>
          <a style="margin:1px;border-radius:5px;color:white;align-items:center;display:flex;padding-left:0.2em;padding-right:0.2em;"
            class="bg-dark hover-bg-balanced active-bg-energized"
            onclick=${()=>function(t){const e=JSON.stringify(t,null,2);Jn(e)}(t)}
          >copy</a>
        </div>
      </div>
    </div>
  `));const Rn=rt((({key:t,value:e,showKids:n=!1,showLevels:o=-1,showAll:r=!1,format:s="flex",formatChange:a=t=>s=t,isRootDump:i=!0,onHeaderClick:l,allowMaximize:c,everySimpleValue:u})=>{i&&void 0===c&&(c=!0);const d=null===e?"null":typeof e;let p,f=!1;return D((t=>[s]=t(s))),D((t=>[r]=t(r))),P((t=>[{show:f,arrayView:p}]=t({show:f,arrayView:p}))),function(t){v(t)}((()=>{(o=o>=0&&o||(-1===o&&!t&&e&&e instanceof Object?2:0))>0&&(f=!0)})),[null,void 0].includes(e)?Pn({key:t,value:d,onHeaderClick:l,everySimpleValue:u}):["boolean","number","string"].includes(d)?Pn({key:t,value:e,onHeaderClick:l,everySimpleValue:u}):function({value:t,showKids:e,key:n,onHeaderClick:o,everySimpleValue:r,format:s,isRootDump:a,showAll:i,formatChange:l,show:c,showLevels:u,allowMaximize:d}){if(null===t)return e?Pn({key:n,value:"null",onHeaderClick:o,everySimpleValue:r}):wn``;const p=(!s||"flex"===s)&&t.push&&t.pop;return wn`
    <div class="taggedjs-dump">
      ${a&&zn({value:t,format:s,showAll:i,showAllChange:t=>i=t,formatChange:l})}
      ${"json"===s&&wn`
        <textarea *ngIf="" disabled wrap="off" style="width:100%;height:25vh;min-height:400px;color:white;"
        >${JSON.stringify(t,null,2)}</textarea>
      `||p&&Nn({key:n,value:t,show:c,showAll:i,showKids:e,showLevels:u,formatChange:l,allowMaximize:d,everySimpleValue:r})||Mn({key:n,show:c,showKids:e,showLevels:u,value:t,showAll:i,formatChange:l,onHeaderClick:o,allowMaximize:d,everySimpleValue:r})}
    </div>
  `}({value:e,showKids:n,key:t,onHeaderClick:l,everySimpleValue:u,format:s,isRootDump:i,showAll:r,formatChange:a,show:f,showLevels:o,allowMaximize:c})}));const In=rt((()=>{let t="";P((e=>[t]=e(t)));let e,n=!1;try{e=function(t,e){if(!t)return t;return e=new Proxy(e,{has:()=>!0}),new Function("with(this) { return ("+t+")}").call(e)}(t,{}),t=JSON.stringify(e,null,2)}catch(o){n=!0;try{JSON.parse(t)}catch(t){e=Object.getOwnPropertyNames(t).reduce(((e,n)=>(e[n]=t[n])&&e||e),{})}}return wn.dom(Wn.allStrings327466[0],n&&wn.dom(Wn.allStrings327466[1]),(e=>{t=e.target.value}),""===e?"":t,""===e?"":wn.dom(Wn.allStrings327466[2],Rn({value:e})),Rn({value:{test:{anotherOne:22},arrayTest:[{name:"something",location:{street:"4361"}},{name:"in this",location:{street:"2235"}},{name:"world",location:{street:"4785"}}]}}),null)}));const Wn={allStrings327466:[[{nn:"h3",ch:[{nn:"text",tc:"🔭 TaggedJs Dump demo page"}]},{nn:"p",ch:[{nn:"text",tc:"Use the textarea below to cast JSON into an interactive display"}]},{nn:"text",v:0},{nn:"div",at:[["style","display:flex;flex-wrap:wrap;align-item:center;justify-content: center;gap:.5em;padding:.5em;"]],ch:[{nn:"textarea",at:[["wrap","off"],["placeholder","paste json here"],["change",{tagJsVar:1},null],["style","min-width:300px;min-height:400px;flex:1"]],ch:[{nn:"text",v:2}]},{nn:"text",v:3}]},{nn:"br"},{nn:"h3",ch:[{nn:"text",tc:"Sample Dumps"}]},{nn:"hr"},{nn:"div",at:[["style","display:flex;flex-wrap:wrap;align-item:center;justify-content: center;gap:1em;"]],ch:[{nn:"div",at:[["style","max-width:900px"]],ch:[{nn:"text",v:4},{nn:"hr"},{nn:"text",v:5}]}]}],[{nn:"div",at:[["style","color:white;background-color:red;padding:.5em;"]],ch:[{nn:"text",tc:"Input data appears to be invalid"}]}],[{nn:"div",at:[["style","flex:1;min-width:110px;width:100%;max-width:900px;background-color:rgba(255,255,255,.5);min-width:300px"]],ch:[{nn:"text",v:0}]}],[{nn:"a",at:[["style","color:blue;"]],ch:[{nn:"text",v:0}]}]]};function Xn(){const t=document.getElementsByTagName("app")[0],e=Date.now();kn(In,t,{test:1});const n=Date.now()-e;console.info(`⏱️ rendered in ${n}ms`)}var Yn=e.qw,Hn=e.cF,Fn=e.eF;export{Yn as App,Hn as hmr,Fn as run};
//# sourceMappingURL=bundle.js.map